# JavaScript垃圾收集机制

## 1. 自动垃圾回收

JavaScript具有自动垃圾收集机制，执行环境会负责管理代码执行过程中使用的内存。所需内存的分配和无用内存的回收实现了自动管理。

## 2. 实现原理

垃圾收集器按照固定的时间间隔，找出那些不再继续使用的变量，然后释放其占用的内存。

## 3. 垃圾收集方式

### 3.1 标记清除

垃圾收集器在运行的时候，会给存储在内存中的所有变量都加上标记。然后它会去掉环境中的变量以及被环境中的变量引用的变量的标记。

而在此之后再被加上标记的变量将被视为准备删除的变量，原因是环境中的变量已经无法访问到这些变量了。

最后垃圾收集器完成内存清除工作，销毁那些带标记的值并回收它们所占用的内存空间。

### 3.2 引用计数

引用计数的含义是跟踪每个值被引用的次数。

当声明了一个变量并将一个引用类型值赋给该变量时，这个值引用次数就是1。如果同一个值又被赋给另一个变量，则引用次数加1。如果包含对这个值引用的变量又取得了另外一个值，则其引用次数减1。当引用次数变成0，垃圾收集器下次运行的时候就会释放引用次数为0的内存。

## 4. 管理内存

为了确保占用最少的内存使页面获得更好的性能，必须优化内存占用，而优化的最佳方式就是为执行中的代码只保存必要的数据。一旦数据不再有用，最好通过将其值设置为 null 来释放其引用——这叫做解除引用。

不过，解除一个值的引用并不意味着自动回收该值所占用的内存。解除引用的真正作用是让值脱离运行环境，以便垃圾收集器下次运行时回收。