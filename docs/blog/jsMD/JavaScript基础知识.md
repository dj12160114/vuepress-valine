# JavaScript基础知识

### 1. JavaScript组成部分

1. **ECMAScript**: JavaScript的核心，描述了语言的基本语法，由 Ecma 国际（前身为欧洲计算机制造商协会，European Computer Manufacturers Association）标准化的程序设计语言。
2. **文档对象模型(DOM)**：DOM 是 HTML 和 XML 的应用程序接口，把整个页面桂花城由节点层级构成的文档。
3. **浏览器对象模型(BOM)**：对浏览器窗口进行访问和操作。

### 2. 数据类型

+ **原始值**
  + boolean
  + null
  + undefined
  + number
  + string
+ **引用值**
  + 对象
+ 原始值和引用值的区别在于 **存储的位置** 和 **访问的方式** 不同。
  + **原始值** 是存储在栈中的简单数据，**引用值** 是存储在堆中的对象数据。
  + 当用变量名访问 **原始值** 时，会直接访问到其存储在栈中的数据。
  + 当用变量名访问 **引用值** 时，会首先获取存储在栈中的对象地址，根据地址再向堆中查找真正的对象数据。
  + **原始值** 所占的内存大小一般是固定不变的，**引用值** 所占的内存通常较大并且不固定，但其地址所占的内存大小是固定不变的。

### 3. 对象

#### 3.1 属性命名规则

对象的情况和数组类似，唯一的不同是它的键的类型是自定义的。也就是说，我们的索引方式不再局限于数字了。

```js
var hero = {
    breed: 'Turtle',
    occupation: 'Ninja'
};
```

有时候，可以在属性名上面加一对引号（单引号、双引号都可以）。如下三行代码所定义的内容完全相同。

```js
var o = { prop: 1 };
var o = { 'prop': 1 };
var o = { "prop": 1 };
```

**通常不建议在属性名上加引号，但在以下情况的时候，引号是必须的。**

+ 属性名是 `JavaScript 保留字`之一。
+ 属性名包含 `空格` 或者其他特殊字符的（包括任何 `除字母、数字以及下划线以外` 的字符）。
+ 属性名以`数字开头`。

#### 3.2 访问对象属性

通常情况下，可以通过 中括号表示法 和 点号表示法 来访问对象属性。

**(1) 中括号表示法**

以下情况，必须使用 中括号表示法 访问对象属性。

+  属性名没有一个合法的名字，规则与 属性命名规则相同。
+ 访问的属性名不确定时，即通过变量访问的时候。

**(2) 点号表示法** 

在不是上述情况的时候，推荐使用 点号表示法。

**(3) 访问对象的属性对象的属性**

```js 
var book = {
    name: 'hello',
    published: '1961',
    author: {
        firstname: 'DENG',
        lastname: 'Jie'
    }
}

// 以下四种方法都可以访问 author 中的 firatname 属性
book.author.firstname;
book['author']['firstname'];
book.author['lastname'];
book['author'].lastname

```

### 4. 数组



### 5. 类型转换

分为**显式类型转换** 与 **隐式类型转换**。

#### 5.1 显式类型转换

显式类型转换，也称强制转换，主要指使用 `Number()`、`String()` 和 `Boolean()` 三个函数，手动将各种类型转换为数字、字符串或布尔值。

**(1) Number()**

下面分两种情况讨论，一种式参数为原始类型的值，另一种是参数是对象。

+ **原始类型值**

```js
// 数值：转换后还是原来的值
Number(324) // 324

// 字符串：如果可以被解析为数值，则转换为相应的数值
Number('324') // 324

// 字符串：如果不可以被解析为数值，返回 NaN
Number('324abc') // NaN

// 空字符串转为0
Number('') // 0

// 布尔值：true 转成 1，false 转成 0
Number(true) // 1
Number(false) // 0

// undefined：转成 NaN
Number(undefined) // NaN

// null：转成0
Number(null) // 0
```

`Number`函数将字符串转为数值，要比`parseInt`函数严格很多。基本上，只要有一个字符无法转成数值，整个字符串就会被转为`NaN`。

```js
parseInt('42 cats') // 42
Number('42 cats') // NaN
```

`parseInt` 和 `Number` 函数都回自动过滤一个字符串前导和后缀的空格。

+ **对象**

`Number` 方法的参数是对象时，将返回 `NaN`，除非是包含单个数值的数组。

```js
Number({a: 1}); // NaN
Number([1,2,3]); // NaN
Number([5]); // 5
```

这是因为 `Number` 背后的转换规则比较复杂。

+ 第一步，调用自身的 `valueOf()` 方法。返回原始类型的值，就直接对该值使用 `Number` 函数，不再继续后续步骤。
+ 第二步，如果 `valueOf` 方法返回的还是对象，则改为调用对象自身的 `toString` 方法。如果 `toString` 方法返回原始类型的值，则对该值使用 `Number` 函数，不再继续后续步骤。
+ 第三步，如果 `toString` 方法返回的是对象，就报错。

```js
Number({a: 1}); // NaN
```

上述代码中，首先调用`obj.valueOf`方法, 结果返回对象本身；于是，继续调用`obj.toString`方法，这时返回字符串`[object Object]`，对这个字符串使用`Number`函数，得到`NaN`。

**(2) String()**

+ **原始类型值**

  + **数值**：转为相应的字符串。

  + **字符串**：转换后还是原来的值。

  + **布尔值**：`true`转为字符串`"true"`，`false`转为字符串`"false"`。

  + **undefined**：转为字符串`"undefined"`。

  + **null**：转为字符串`"null"`。

+ **对象**

`String`方法的参数如果是对象，返回一个类型字符串；如果是数组，返回该数组的字符串形式。

```js
String({a: 1}) // "[object Object]"
String([1, 2, 3]) // "1,2,3"
```

`tring`方法背后的转换规则，与`Number`方法基本相同，只是互换了`valueOf`方法和`toString`方法的执行顺序。

+ 先调用对象自身的`toString`方法。如果返回原始类型的值，则对该值使用`String`函数，不再进行以下步骤。
+ 如果`toString`方法返回的是对象，再调用原对象的`valueOf`方法。如果`valueOf`方法返回原始类型的值，则对该值使用`String`函数，不再进行以下步骤。
+ 如果`valueOf`方法返回的是对象，就报错。

**(3) Boolean()**

`Boolean()`函数可以将任意类型的值转为布尔值。

它的转换规则相对简单：除了以下五个值的转换结果为`false`，其他的值全部为`true`。

- `undefined`
- `null`
- `0`（包含`-0`和`+0`）
- `NaN`
- `''`（空字符串）

注意，所有对象（包括空对象）的转换结果都是`true`，甚至连`false`对应的布尔对象`new Boolean(false)`也是`true`

#### 5.2 隐式类型转换

下面介绍自动转换，它是以强制转换为基础的。

遇到以下三种情况时，JavaScript 会自动转换数据类型，即转换是自动完成的，用户不可见。

+ 第一种情况，不同类型的数据互相运算。

```js
123 + 'abc' // "123abc"
```

+ 第二种情况，对非布尔值类型的数据求布尔值。

```js
if ('abc') {
  console.log('hello')
}  // "hello"
```

+ 第三种情况，对非数值类型的值使用一元运算符（即`+`和`-`）。

```js
+ {foo: 'bar'} // NaN
- [1, 2, 3] // NaN
```

自动转换的规则是这样的：预期什么类型的值，就调用该类型的转换函数。比如，某个位置预期为字符串，就调用`String`函数进行转换。如果该位置即可以是字符串，也可能是数值，那么默认转为数值。

### 4. RegExp 正则表达式对象

#### 4.1 匹配模式

斜杠符内编写正则表达式文本，结束斜杠符的右边指定匹配模式。

| 匹配模式   | 作用                                                    |
| -------- | ------------------------------------------------------------ |
| G        | 全局匹配（匹配到一个结果之后还会向后继续匹配，直到结束）     |
| I        | 匹配过程忽略大小写                                           |
| M        | 多行匹配模式（默认情况下，开始符 ^ 与结束符 $ 工作在单行模式，将只匹配<br>整个文本的开始与结束，配置这个参数后，会匹配每一行的开始与结束） |

#### 4.2 特殊字符

某一个特殊字符可以代表某一类字符。

| 字符   | 含义                                                   |
| ------ | ------------------------------------------------------ |
| .      | 匹配任意字符                                           |
| \d     | 匹配 0~9的任意一个数字字符                             |
| \D     | 匹配任意一个不是数字的字符                             |
| \w     | 匹配任意一个字母、数字或下划线字符                     |
| \W     | 匹配任意一个非字母、非数字或非下划线的字符             |
| \s     | 匹配任意一个空白符，包括换行符、制表符、空格、换页符等 |
| \S     | 匹配任意一个非空白符                                   |
| \t     | 匹配一个水平制表符                                     |
| \r     | 匹配一个回车符                                         |
| \n     | 匹配一个换行符                                         |
| \v     | 匹配一个垂直制表符                                     |
| \f     | 匹配一个换页符                                         |
| [\b]   | 匹配一个退格符                                         |
| \0     | 匹配一个NUL字符                                        |
| \xhh   | 匹配一个编码为 hh 的字符（十六进制）                   |
| \uhhhh | 匹配一个 Unicode 值为 hhhh 的字符                      |

#### 4.3 字符集合

字符集合用于匹配某个集合内的字符。

| 字符集合 | 含义                 |
| -------- | -------------------- |
| [abc]    | 匹配括号内的一个字符 |
| [a-b]    | 匹配范围内的字符 |
| [^abc]    | 匹配除了集合字符外的所有字符 |
| [^a-b]    | 匹配除了集合范围外的所有字符 |

#### 4.4 定义边界和数量的字符

+ **边界**

| 字符 | 含义 |
| ---- | ---- |
|  ^   | 匹配字符串开头      |
|  $   | 匹配字符串结尾      |

+ **数量**

| 字符 | 含义 |
| ---- | ---- |
|  x*  | 匹配 0 次或多次 x 字符    |
|  x+   | 匹配 1 次或多次 x 字符    |
| x?    | 匹配  0 次或 1 次 x 字符 |
| x(?!y)    | 当 x 字符后面不是 y 字符才开始匹配 |
| x\|y |匹配字符 x 或字符 y    |
| x{n}   | 匹配连续 n 个  x |
| x{n,}  | 匹配至少连续 n 个  x |
| x{n,m}  | 匹配连续出现 n~m 个  x |



